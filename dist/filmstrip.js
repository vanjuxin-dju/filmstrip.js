(()=>{"use strict";function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var i,n=function(){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t(this,"timer",void 0),t(this,"isLoop",void 0),this.timer=null,this.isLoop=e}var n,s,r;return n=i,(s=[{key:"setAutomatedSwitch",value:function(e,t,i){clearTimeout(this.timer),(!e||this.isLoop&&e)&&(this.timer=setTimeout((function(){i()}),1e3*t))}},{key:"clearAutomatedSwitch",value:function(){clearTimeout(this.timer)}}])&&e(n.prototype,s),r&&e(n,r),Object.defineProperty(n,"prototype",{writable:!1}),i}();!function(e){e.UP="up",e.LEFT="left",e.RIGHT="right",e.DOWN="down"}(i||(i={}));const s=i;var r;!function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"}(r||(r={}));const a=r;function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const l=function(){function e(t){var i,n,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s=void 0,(n="overlayElement")in(i=this)?Object.defineProperty(i,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[n]=s,this.overlayElement=document.createElement("div"),this.overlayElement.classList.add("overlay","overlay-"+t),this.overlayElement.innerHTML='<div class="previous-slide" name="previous">\n                                            <div class="arrow" title="Previous slide"></div>\n                                        </div>\n                                        <div class="next-slide" name="next">\n                                            <div class="arrow" title="Next slide"></div>\n                                        </div>',document.body.append(this.overlayElement)}var t,i,n;return t=e,(i=[{key:"addNextSlideClickListener",value:function(e){this.overlayElement.children.next.children[0].onclick=e}},{key:"addPreviousSlideClickListener",value:function(e){this.overlayElement.children.previous.children[0].onclick=e}},{key:"disablePreviousButton",value:function(){this.overlayElement.children.previous.classList.add("disabled")}},{key:"enablePreviousButton",value:function(){this.overlayElement.children.previous.classList.remove("disabled")}},{key:"disableNextButton",value:function(){this.overlayElement.children.next.classList.add("disabled")}},{key:"enableNextButton",value:function(){this.overlayElement.children.next.classList.remove("disabled")}}])&&o(t.prototype,i),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const d=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"firstItem",void 0),u(this,"lastItem",void 0),u(this,"context",void 0),u(this,"func",void 0),this.firstItem=null,this.lastItem=null,this.context=t,this.func=i}var t,i,n;return t=e,(i=[{key:"addAction",value:function(e,t){var i=!1,n={action:e,callback:void 0===t?null:t,next:null};null===this.firstItem&&(this.firstItem=n,i=!0),null!==this.lastItem&&(this.lastItem.next=n),this.lastItem=n,i&&this.goThrough()}},{key:"goThrough",value:function(){var e=this;null!==this.firstItem?this.func.call(this.context,this.firstItem.action,(function(){null!==e.firstItem&&(null!==e.firstItem.callback&&e.firstItem.callback(),e.firstItem=e.firstItem.next,e.goThrough())})):this.lastItem=null}}])&&c(t.prototype,i),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function v(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var m,y,S="slides",b="slide",w="previous",A="next",E="slide-format-",T=E+"4-3-landscape",g=E+"16-9-landscape",L=E+"4-3-portrait",P=E+"16-9-portrait",I=E+"square",C=E+"flexible",k="slides-separate";!function(e){e[e.SEPARATE=0]="SEPARATE",e[e.FILMSTRIP=1]="FILMSTRIP"}(m||(m={})),function(e){e[e.FLEXIBLE=0]="FLEXIBLE",e[e.SQUARE=1]="SQUARE",e[e.LANDSCAPE_4_3=2]="LANDSCAPE_4_3",e[e.LANDSCAPE_16_9=3]="LANDSCAPE_16_9",e[e.PORTRAIT_4_3=4]="PORTRAIT_4_3",e[e.PORTRAIT_16_9=5]="PORTRAIT_16_9"}(y||(y={}));var R=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"currentSlide",void 0),p(this,"actionQueue",void 0),p(this,"parent",void 0),p(this,"isLoop",void 0),p(this,"slideshowStyle",void 0),p(this,"slidesDirection",void 0),p(this,"slidesCount",void 0),p(this,"automatedSwitchBetweenSlides",void 0),this.currentSlide=0,this.actionQueue=new d(this,this.scrollSlide),this.parent=document.getElementsByClassName(S)[0],this.isLoop=!!this.parent.dataset.loop,this.isLoop){var i=this.parent.children[0].cloneNode(!0);this.parent.append(i)}if(this.hasSpecificFormat(this.parent)&&this.parentHasClass("show-old-film-style")&&this.addOldStyle(),this.slideshowStyle=this.parentHasClass(k)?m.SEPARATE:m.FILMSTRIP,this.slideshowStyle===m.SEPARATE)this.slidesDirection=this.parentHasClass("slides-separate-up")?s.UP:this.parentHasClass("slides-separate-right")?s.RIGHT:this.parentHasClass("slides-separate-left")?s.LEFT:s.DOWN;else{this.slidesDirection=this.parentHasClass("slides-filmstrip-horizontal")?a.HORIZONTAL:a.VERTICAL;var n=this.parentHasClass(T)?y.LANDSCAPE_4_3:this.parentHasClass(g)?y.LANDSCAPE_16_9:this.parentHasClass(L)?y.PORTRAIT_4_3:this.parentHasClass(P)?y.PORTRAIT_16_9:this.parentHasClass(I)?y.SQUARE:y.FLEXIBLE;if(this.hasSpecificFormat(this.parent)&&this.parentHasClass("show-perforations"))switch(n){case y.LANDSCAPE_4_3:this.addPerforation(this.slidesDirection===a.VERTICAL?4:8);break;case y.SQUARE:this.addPerforation(4);break;case y.LANDSCAPE_16_9:this.addPerforation(this.slidesDirection===a.VERTICAL?3:12);break;case y.PORTRAIT_4_3:this.addPerforation(this.slidesDirection===a.VERTICAL?8:4);break;case y.PORTRAIT_16_9:this.addPerforation(this.slidesDirection===a.VERTICAL?12:3)}}this.hasSpecificFormat(this.parent)&&!this.isThereFlexibleFormatAmongSlides()||console.warn("It is not recommended to use flexible slide format!\nPlease use one of the following classes in the root div element or in a slide:\n- slide-format-4-3-landscape;\n- slide-format-16-9-landscape;\n- slide-format-4-3-portrait;\n- slide-format-16-9-portrait;\n- slide-format-square.\nSee https://github.com/vanjuxin-dju/filmstrip.js/wiki/Slide-formats"),this.automatedSwitchBetweenSlides=this.parent.dataset.switchAfter,this.slidesCount=document.getElementsByClassName(b).length,t&&t>1&&(this.currentSlide=t-2,this.nextSlide())}var t,i,n;return t=e,(i=[{key:"parentHasClass",value:function(e){return this.parent.classList.contains(e)}},{key:"addOldStyle",value:function(){for(var e=this.parent.children,t=0;t<e.length;t++)this.addOldFilmStyleToSlide(e[t])}},{key:"addOldFilmStyleToSlide",value:function(e){var t=document.createElement("div");t.classList.add("old-film"),e.append(t)}},{key:"hasSpecificFormat",value:function(e){var t=e.classList;return t.contains(T)||t.contains(g)||t.contains(L)||t.contains(P)||t.contains(I)}},{key:"addPerforation",value:function(e){var t=this,i=this.parent.children;if(!(h(i).findIndex((function(e){return t.hasSpecificFormat(e)||e.classList.contains(C)}))>=0))for(var n=0;n<i.length;n++)this.addPerforationToSlide(i[n],e)}},{key:"addPerforationToSlide",value:function(e,t){var i=document.createElement("div");i.classList.add("perforation-wrapper"),e.append(i);for(var n=1;n<t;n++)i=i.cloneNode(!1),e.append(i)}},{key:"isThereFlexibleFormatAmongSlides",value:function(){return!!h(this.parent.children).find((function(e){return e.classList.contains(C)}))}},{key:"scrollSlide",value:function(e,t){var i=this,n=100,r=-100*this.currentSlide,o=1,l=1,c=function(){e===A?i.currentSlide++:i.currentSlide--};this.isBeginning()&&e===w||this.isEnding()&&e===A?t():this.slideshowStyle===m.SEPARATE?function a(u){setTimeout((function(){i.slidesDirection===s.UP?i.parent.style.top=-(u?100-l:l)+"vh":i.slidesDirection===s.RIGHT?i.parent.style.left=(u?100-l:l)+"vw":i.slidesDirection===s.LEFT?i.parent.style.left=-(u?100-l:l)+"vw":i.parent.style.top=(u?100-l:l)+"vh",l<50?o++:o>1&&o--,l+=o,u?l<=n?a(!0):(c(),i.isLoop&&i.isEnding()&&(i.currentSlide=0,i.slidesDirection===s.UP||i.slidesDirection===s.DOWN?i.parent.style.left="0vw":i.parent.style.top="0vh"),t()):l<=n?a(!1):(i.slidesDirection===s.UP||i.slidesDirection===s.DOWN?i.parent.style.left=(e===A?r-100:r+100)+"vw":i.parent.style.top=(e===A?r-100:r+100)+"vh",o=1,l=1,a(!0))}),20)}():function s(){setTimeout((function(){i.slidesDirection===a.VERTICAL?i.parent.style.top=(e===A?r-l:r+l)+"vh":i.parent.style.left=(e===A?r-l:r+l)+"vw",l<50?o++:o>1&&o--,(l+=o)<=n?s():(c(),i.isLoop&&i.isEnding()&&(i.currentSlide=0,i.slidesDirection===a.VERTICAL?i.parent.style.top="0vh":i.parent.style.left="0vw"),t())}),20)}()}},{key:"previousSlide",value:function(e){this.actionQueue.addAction(w,e)}},{key:"nextSlide",value:function(e){this.actionQueue.addAction(A,e)}},{key:"getSlidesDirection",value:function(){return this.slidesDirection}},{key:"getIsLoop",value:function(){return this.isLoop}},{key:"getDefaultTimeBetweenSlides",value:function(){return this.automatedSwitchBetweenSlides?parseInt(this.automatedSwitchBetweenSlides):0}},{key:"getCurrentSlideSwitchAfter",value:function(){var e=this.parent.children[this.currentSlide].dataset.switchAfter;return e?parseInt(e):0}},{key:"isBeginning",value:function(){return 0===this.currentSlide}},{key:"isEnding",value:function(){return this.currentSlide+1===this.slidesCount}}])&&v(t.prototype,i),n&&v(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();var N=new R(function(){var e=window.location.hash;e=e?e.substring(1):e;var t=parseInt(e);return window.location.hash="",Number.isNaN(t)?1:t}()),D=new l(N.getSlidesDirection()),O=new n(N.getIsLoop()),_=function(){var e=N.getCurrentSlideSwitchAfter();(Number.isNaN(e)||e<=0)&&(e=N.getDefaultTimeBetweenSlides()),Number.isNaN(e)||e<=0||O.setAutomatedSwitch(N.isEnding(),e,(function(){B()}))},x=function(){O.clearAutomatedSwitch(),N.previousSlide((function(){N.isBeginning()&&D.disablePreviousButton(),N.isEnding()||D.enableNextButton(),_()}))},B=function(){O.clearAutomatedSwitch(),N.nextSlide((function(){N.isBeginning()?D.disablePreviousButton():D.enablePreviousButton(),N.isEnding()&&D.disableNextButton(),_()}))};D.addPreviousSlideClickListener(x),D.addNextSlideClickListener(B),N.isBeginning()&&D.disablePreviousButton(),N.isEnding()&&D.disableNextButton(),_();var F,H,j,U=new Set(["ArrowLeft","ArrowUp"]),V=new Set(["ArrowRight","ArrowDown","Space","Enter","NumpadEnter"]);document.addEventListener("keyup",(function(e){U.has(e.code)?x():V.has(e.code)&&B()})),F=N.getSlidesDirection(),H=0,j=0,document.addEventListener("touchstart",(function(e){H=F===a.VERTICAL||F===s.UP||F===s.DOWN?e.changedTouches[0].screenY:e.changedTouches[0].screenX})),document.addEventListener("touchend",(function(e){(j=F===a.VERTICAL||F===s.UP||F===s.DOWN?e.changedTouches[0].screenY:e.changedTouches[0].screenX)<H?B():j>H&&x()}))})();