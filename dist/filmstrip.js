(()=>{"use strict";var e={SLIDES:"slides",SLIDE:"slide"};e.SLIDES_SEPARATE=e.SLIDES+"-separate",e.SLIDES_SEPARATE_UP=e.SLIDES_SEPARATE+"-up",e.SLIDES_SEPARATE_LEFT=e.SLIDES_SEPARATE+"-left",e.SLIDES_SEPARATE_RIGHT=e.SLIDES_SEPARATE+"-right",e.SLIDES_FILMSTRIP_HORIZONTAL=e.SLIDES+"-filmstrip-horizontal";var t=e.SLIDE+"-format-";e.SLIDE_FORMAT_4_3_LANDSCAPE=t+"4-3-landscape",e.SLIDE_FORMAT_16_9_LANDSCAPE=t+"16-9-landscape",e.SLIDE_FORMAT_4_3_PORTRAIT=t+"4-3-portrait",e.SLIDE_FORMAT_16_9_PORTRAIT=t+"16-9-portrait",e.SLIDE_FORMAT_SQUARE=t+"square",e.SLIDE_FORMAT_FLEXIBLE=t+"flexible",e.SHOW_PERFORATIONS="show-perforations",e.PERFORATION_WRAPPER="perforation-wrapper",e.SHOW_OLD_FILM_STYLE="show-old-film-style",e.OLD_FILM="old-film";const i={SLIDESHOW_TYPE:{SEPARATE:"separate",FILMSTRIP:"filmstrip"},SEPARATE_SLIDES_DIRECTION:{UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right"},FILMSTRIP_DIRECTION:{HORIZONTAL:"horizontal",VERTICAL:"vertical"},SLIDE_FORMAT:{FLEXIBLE:"flexible",SQUARE:"square",LANDSCAPE_4_3:"4:3-landscape",LANDSCAPE_16_9:"16:9-landscape",PORTRAIT_4_3:"4:3-portrait",PORTRAIT_16_9:"16:9-portrait"},CLASSES:e,SWITCHES:{PREVIOUS:"previous",NEXT:"next"},FLEXIBLE_WARNING_MESSAGE:"It is not recommended to use flexible slide format!\nPlease use one of the following classes in the root div element or in a slide:\n- slide-format-4-3-landscape;\n- slide-format-16-9-landscape;\n- slide-format-4-3-portrait;\n- slide-format-16-9-portrait;\n- slide-format-square.\nSee https://github.com/vanjuxin-dju/filmstrip.js/wiki/Slide-formats",hasSpecificFormat:function(t){var i=t.classList;return i.contains(e.SLIDE_FORMAT_4_3_LANDSCAPE)||i.contains(e.SLIDE_FORMAT_16_9_LANDSCAPE)||i.contains(e.SLIDE_FORMAT_4_3_PORTRAIT)||i.contains(e.SLIDE_FORMAT_16_9_PORTRAIT)||i.contains(e.SLIDE_FORMAT_SQUARE)},addPerforationToSlide:function(t,i){var n=document.createElement("div");n.classList.add(e.PERFORATION_WRAPPER),t.append(n);for(var r=1;r<i;r++)n=n.cloneNode(!1),t.append(n)},addOldFilmStyleToSlide:function(t){var i=document.createElement("div");i.classList.add(e.OLD_FILM),t.append(i)}};function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,i){a(e,t),t.set(e,i)}function a(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function s(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function o(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,c(e,t,"set"),i),i}function l(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,c(e,t,"get"))}function c(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var S=new WeakMap,E=new WeakMap,u=new WeakSet,d=function(){function e(t,i){var n,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(n=this,s=u),s.add(n),r(this,S,{writable:!0,value:null}),r(this,E,{writable:!0,value:null}),this._context=t,this._func=i}var t,i,c;return t=e,(i=[{key:"addAction",value:function(e,t){var i=!1,n={action:e,callback:t,next:null};null===l(this,S)&&(o(this,S,n),i=!0),null!==l(this,E)&&(l(this,E).next=n),o(this,E,n),i&&s(this,u,h).call(this)}}])&&n(t.prototype,i),c&&n(t,c),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(){var e=this;null!==l(this,S)?this._func.call(this._context,l(this,S).action,(function(){l(e,S).callback&&l(e,S).callback(),o(e,S,l(e,S).next),s(e,u,h).call(e)})):o(this,E,null)}function _(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function I(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,t){A(e,t),t.add(e)}function A(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function L(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,R(e,t,"get"))}function p(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,R(e,t,"set"),i),i}function R(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function v(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}var D=new WeakMap,w=new WeakSet,O=new WeakSet,P=new WeakSet,m=new WeakSet,y=new WeakSet,C=function(){function e(t){var n,r,a;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),T(this,y),T(this,m),T(this,P),T(this,O),T(this,w),a={writable:!0,value:0},A(n=this,r=D),r.set(n,a),this._actionQueue=new d(this,v(this,y,M)),this._parent=document.getElementsByClassName(i.CLASSES.SLIDES)[0],this._isLoop=!!this._parent.dataset.loop,this._isLoop){var s=this._parent.children[0].cloneNode(!0);this._parent.append(s)}if(i.hasSpecificFormat(this._parent)&&v(this,m,g).call(this,i.CLASSES.SHOW_OLD_FILM_STYLE)&&v(this,O,N).call(this),this._slideshowStyle=v(this,m,g).call(this,i.CLASSES.SLIDES_SEPARATE)?i.SLIDESHOW_TYPE.SEPARATE:i.SLIDESHOW_TYPE.FILMSTRIP,this._slideshowStyle===i.SLIDESHOW_TYPE.SEPARATE)this._slidesDirection=v(this,m,g).call(this,i.CLASSES.SLIDES_SEPARATE_UP)?i.SEPARATE_SLIDES_DIRECTION.UP:v(this,m,g).call(this,i.CLASSES.SLIDES_SEPARATE_RIGHT)?i.SEPARATE_SLIDES_DIRECTION.RIGHT:v(this,m,g).call(this,i.CLASSES.SLIDES_SEPARATE_LEFT)?i.SEPARATE_SLIDES_DIRECTION.LEFT:i.SEPARATE_SLIDES_DIRECTION.DOWN;else{this._slidesDirection=v(this,m,g).call(this,i.CLASSES.SLIDES_FILMSTRIP_HORIZONTAL)?i.FILMSTRIP_DIRECTION.HORIZONTAL:i.FILMSTRIP_DIRECTION.VERTICAL;var o=v(this,m,g).call(this,i.CLASSES.SLIDE_FORMAT_4_3_LANDSCAPE)?i.SLIDE_FORMAT.LANDSCAPE_4_3:v(this,m,g).call(this,i.CLASSES.SLIDE_FORMAT_16_9_LANDSCAPE)?i.SLIDE_FORMAT.LANDSCAPE_16_9:v(this,m,g).call(this,i.CLASSES.SLIDE_FORMAT_4_3_PORTRAIT)?i.SLIDE_FORMAT.PORTRAIT_4_3:v(this,m,g).call(this,i.CLASSES.SLIDE_FORMAT_16_9_PORTRAIT)?i.SLIDE_FORMAT.PORTRAIT_16_9:v(this,m,g).call(this,i.CLASSES.SLIDE_FORMAT_SQUARE)?i.SLIDE_FORMAT.SQUARE:i.SLIDE_FORMAT.FLEXIBLE;if(i.hasSpecificFormat(this._parent)&&v(this,m,g).call(this,i.CLASSES.SHOW_PERFORATIONS))switch(o){case i.SLIDE_FORMAT.LANDSCAPE_4_3:v(this,w,b).call(this,this._slidesDirection===i.FILMSTRIP_DIRECTION.VERTICAL?4:8);break;case i.SLIDE_FORMAT.SQUARE:v(this,w,b).call(this,4);break;case i.SLIDE_FORMAT.LANDSCAPE_16_9:v(this,w,b).call(this,this._slidesDirection===i.FILMSTRIP_DIRECTION.VERTICAL?3:12);break;case i.SLIDE_FORMAT.PORTRAIT_4_3:v(this,w,b).call(this,this._slidesDirection===i.FILMSTRIP_DIRECTION.VERTICAL?8:4);break;case i.SLIDE_FORMAT.PORTRAIT_16_9:v(this,w,b).call(this,this._slidesDirection===i.FILMSTRIP_DIRECTION.VERTICAL?12:3)}}i.hasSpecificFormat(this._parent)&&!v(this,P,F).call(this)||console.warn(i.FLEXIBLE_WARNING_MESSAGE),this._automatedSwitchBetweenSlides=this._parent.dataset.switchAfter,this._slidesCount=document.getElementsByClassName(i.CLASSES.SLIDE).length,t&&t>1&&(p(this,D,t-2),this.nextSlide())}var t,n,r;return t=e,(n=[{key:"previousSlide",value:function(e){this._actionQueue.addAction(i.SWITCHES.PREVIOUS,e)}},{key:"nextSlide",value:function(e){this._actionQueue.addAction(i.SWITCHES.NEXT,e)}},{key:"slidesDirection",get:function(){return this._slidesDirection}},{key:"isLoop",get:function(){return this._isLoop}},{key:"defaultTimeBetweenSlides",get:function(){return this._automatedSwitchBetweenSlides?parseInt(this._automatedSwitchBetweenSlides):0}},{key:"getCurrentSlideSwitchAfter",value:function(){var e=this._parent.children[L(this,D)].dataset.switchAfter;return e?parseInt(e):0}},{key:"isBeginning",value:function(){return 0===L(this,D)}},{key:"isEnding",value:function(){return L(this,D)+1===this._slidesCount}}])&&I(t.prototype,n),r&&I(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b(e){var t=this._parent.children;if(!(_(t).findIndex((function(e){return i.hasSpecificFormat(e)||e.classList.contains(i.CLASSES.SLIDE_FORMAT_FLEXIBLE)}))>=0))for(var n=0;n<t.length;n++)i.addPerforationToSlide(t[n],e)}function N(){for(var e=this._parent.children,t=0;t<e.length;t++)i.addOldFilmStyleToSlide(e[t])}function F(){return!!_(this._parent.children).find((function(e){return e.classList.contains(i.CLASSES.SLIDE_FORMAT_FLEXIBLE)}))}function g(e){return this._parent.classList.contains(e)}function M(e,t){var n=this,r=100,a=-100*L(this,D),s=1,o=1,l=function(){var t,r;e===i.SWITCHES.NEXT?p(n,D,(t=L(n,D),t++,t)):p(n,D,(r=L(n,D),r--,r))};this.isBeginning()&&e===i.SWITCHES.PREVIOUS||this.isEnding()&&e===i.SWITCHES.NEXT?t():this._slideshowStyle===i.SLIDESHOW_TYPE.SEPARATE?function c(S){setTimeout((function(){n._slidesDirection===i.SEPARATE_SLIDES_DIRECTION.UP?n._parent.style.top=-(S?100-o:o)+"vh":n._slidesDirection===i.SEPARATE_SLIDES_DIRECTION.RIGHT?n._parent.style.left=(S?100-o:o)+"vw":n._slidesDirection===i.SEPARATE_SLIDES_DIRECTION.LEFT?n._parent.style.left=-(S?100-o:o)+"vw":n._parent.style.top=(S?100-o:o)+"vh",o<50?s++:s>1&&s--,o+=s,S?o<=r?c(!0):(l(),n._isLoop&&n.isEnding()&&(p(n,D,0),n._slidesDirection===i.SEPARATE_SLIDES_DIRECTION.UP||n._slidesDirection===i.SEPARATE_SLIDES_DIRECTION.DOWN?n._parent.style.left="0vw":n._parent.style.top="0vh"),t()):o<=r?c(!1):(n._slidesDirection===i.SEPARATE_SLIDES_DIRECTION.UP||n._slidesDirection===i.SEPARATE_SLIDES_DIRECTION.DOWN?n._parent.style.left=(e===i.SWITCHES.NEXT?a-100:a+100)+"vw":n._parent.style.top=(e===i.SWITCHES.NEXT?a-100:a+100)+"vh",s=1,o=1,c(!0))}),20)}():function c(){setTimeout((function(){n._slidesDirection===i.FILMSTRIP_DIRECTION.VERTICAL?n._parent.style.top=(e===i.SWITCHES.NEXT?a-o:a+o)+"vh":n._parent.style.left=(e===i.SWITCHES.NEXT?a-o:a+o)+"vw",o<50?s++:s>1&&s--,(o+=s)<=r?c():(l(),n._isLoop&&n.isEnding()&&(p(n,D,0),n._slidesDirection===i.FILMSTRIP_DIRECTION.VERTICAL?n._parent.style.top="0vh":n._parent.style.left="0vw"),t())}),20)}()}function k(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var W=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.overlayElement=document.createElement("div"),this.overlayElement.classList.add("overlay","overlay-"+t),this.overlayElement.innerHTML='<div class="previous-slide" name="previous">\n                                            <div class="arrow" title="Previous slide"></div>\n                                        </div>\n                                        <div class="next-slide" name="next">\n                                            <div class="arrow" title="Next slide"></div>\n                                        </div>',document.body.append(this.overlayElement)}var t,i,n;return t=e,(i=[{key:"addNextSlideClickListener",value:function(e){this.overlayElement.children.next.children[0].onclick=e}},{key:"addPreviousSlideClickListener",value:function(e){this.overlayElement.children.previous.children[0].onclick=e}},{key:"disablePreviousButton",value:function(){this.overlayElement.children.previous.classList.add("disabled")}},{key:"enablePreviousButton",value:function(){this.overlayElement.children.previous.classList.remove("disabled")}},{key:"disableNextButton",value:function(){this.overlayElement.children.next.classList.add("disabled")}},{key:"enableNextButton",value:function(){this.overlayElement.children.next.classList.remove("disabled")}}])&&k(t.prototype,i),n&&k(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function B(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(e,t,i){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}function x(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,j(e,t,"get"))}function U(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,j(e,t,"set"),i),i}function j(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var X=new WeakMap,V=new WeakMap,G=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),H(this,X,{writable:!0,value:null}),H(this,V,{writable:!0,value:!1}),U(this,V,t)}var t,i,n;return t=e,(i=[{key:"setAutomatedSwitch",value:function(e,t,i){clearTimeout(x(this,X)),(!e||x(this,V)&&e)&&U(this,X,setTimeout((function(){i()}),1e3*t))}},{key:"clearAutomatedSwitch",value:function(){clearTimeout(x(this,X))}}])&&B(t.prototype,i),n&&B(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Q=new C(function(){var e=window.location.hash;e=e?e.substring(1):e;var t=parseInt(e);return window.location.hash="",Number.isNaN(t)?1:t}()),Y=new W(Q.slidesDirection),z=new G(Q.isLoop),Z=function(){var e=Q.getCurrentSlideSwitchAfter();(Number.isNaN(e)||e<=0)&&(e=Q.defaultTimeBetweenSlides),Number.isNaN(e)||e<=0||z.setAutomatedSwitch(Q.isEnding(),e,(function(){$()}))},q=function(){z.clearAutomatedSwitch(),Q.previousSlide((function(){Q.isBeginning()&&Y.disablePreviousButton(),Q.isEnding()||Y.enableNextButton(),Z()}))},$=function(){z.clearAutomatedSwitch(),Q.nextSlide((function(){Q.isBeginning()?Y.disablePreviousButton():Y.enablePreviousButton(),Q.isEnding()&&Y.disableNextButton(),Z()}))};Y.addPreviousSlideClickListener(q),Y.addNextSlideClickListener($),Q.isBeginning()&&Y.disablePreviousButton(),Q.isEnding()&&Y.disableNextButton(),Z();var J,K,ee,te=new Set(["ArrowLeft","ArrowUp"]),ie=new Set(["ArrowRight","ArrowDown","Space","Enter","NumpadEnter"]);document.addEventListener("keyup",(function(e){te.has(e.code)?q():ie.has(e.code)&&$()})),J=Q.slidesDirection,K=0,ee=0,document.addEventListener("touchstart",(function(e){K="vertical"===J||"up"===J||"down"===J?e.changedTouches[0].screenY:e.changedTouches[0].screenX})),document.addEventListener("touchend",(function(e){(ee="vertical"===J||"up"===J||"down"===J?e.changedTouches[0].screenY:e.changedTouches[0].screenX)<K?$():ee>K&&q()}))})();