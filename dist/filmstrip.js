(()=>{"use strict";function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var i,n=function(){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t(this,"timer",void 0),t(this,"isLoop",void 0),this.timer=null,this.isLoop=e}var n,s,r;return n=i,(s=[{key:"setAutomatedSwitch",value:function(e,t,i){this.clearAutomatedSwitch(),(!e||this.isLoop&&e)&&(this.timer=setTimeout((function(){i()}),1e3*t))}},{key:"clearAutomatedSwitch",value:function(){null!==this.timer&&clearTimeout(this.timer)}}])&&e(n.prototype,s),r&&e(n,r),Object.defineProperty(n,"prototype",{writable:!1}),i}();!function(e){e.UP="up",e.LEFT="left",e.RIGHT="right",e.DOWN="down"}(i||(i={}));const s=i;var r;!function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"}(r||(r={}));const a=r;var o="previous",l="next";function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"previous",void 0),d(this,"next",void 0);var i=document.createElement("div");i.classList.add("overlay","overlay-"+t),i.innerHTML='<div class="previous-slide" name="previous">\n                                        <div class="arrow" title="Previous slide"></div>\n                                    </div>\n                                    <div class="next-slide" name="next">\n                                        <div class="arrow" title="Next slide"></div>\n                                    </div>',document.body.append(i),this.previous=i.children.namedItem(o),this.next=i.children.namedItem(l)}var t,i,n;return t=e,(i=[{key:"addNextSlideClickListener",value:function(e){this.next.children[0].onclick=function(t){e()}}},{key:"addPreviousSlideClickListener",value:function(e){this.previous.children[0].onclick=function(t){e()}}},{key:"disablePreviousButton",value:function(){this.previous.classList.add("disabled")}},{key:"enablePreviousButton",value:function(){this.previous.classList.remove("disabled")}},{key:"disableNextButton",value:function(){this.next.classList.add("disabled")}},{key:"enableNextButton",value:function(){this.next.classList.remove("disabled")}}])&&c(t.prototype,i),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const p=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"firstItem",void 0),f(this,"lastItem",void 0),f(this,"context",void 0),f(this,"func",void 0),this.firstItem=null,this.lastItem=null,this.context=t,this.func=i}var t,i,n;return t=e,(i=[{key:"addAction",value:function(e,t){var i=!1,n={action:e,callback:void 0===t?null:t,next:null};null===this.firstItem&&(this.firstItem=n,i=!0),null!==this.lastItem&&(this.lastItem.next=n),this.lastItem=n,i&&this.goThrough()}},{key:"goThrough",value:function(){var e=this;null!==this.firstItem?this.func.call(this.context,this.firstItem.action,(function(){null!==e.firstItem&&(null!==e.firstItem.callback&&e.firstItem.callback(),e.firstItem=e.firstItem.next,e.goThrough())})):this.lastItem=null}}])&&h(t.prototype,i),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var S,y,b="slides",w="slide",A="slide-format-",T=A+"4-3-landscape",E=A+"16-9-landscape",L=A+"4-3-portrait",g=A+"16-9-portrait",P=A+"square",I=A+"flexible",C="slides-separate";!function(e){e[e.SEPARATE=0]="SEPARATE",e[e.FILMSTRIP=1]="FILMSTRIP"}(S||(S={})),function(e){e[e.FLEXIBLE=0]="FLEXIBLE",e[e.SQUARE=1]="SQUARE",e[e.LANDSCAPE_4_3=2]="LANDSCAPE_4_3",e[e.LANDSCAPE_16_9=3]="LANDSCAPE_16_9",e[e.PORTRAIT_4_3=4]="PORTRAIT_4_3",e[e.PORTRAIT_16_9=5]="PORTRAIT_16_9"}(y||(y={}));var k=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"currentSlide",void 0),m(this,"actionQueue",void 0),m(this,"parent",void 0),m(this,"isLoop",void 0),m(this,"slideshowStyle",void 0),m(this,"slidesDirection",void 0),m(this,"slidesCount",void 0),m(this,"automatedSwitchBetweenSlides",void 0),this.currentSlide=0,this.actionQueue=new p(this,this.scrollSlide),this.parent=document.getElementsByClassName(b)[0],this.isLoop=!!this.parent.dataset.loop,this.isLoop){var i=this.parent.children[0].cloneNode(!0);this.parent.append(i)}if(this.hasSpecificFormat(this.parent)&&this.parentHasClass("show-old-film-style")&&this.addOldStyle(),this.slideshowStyle=this.parentHasClass(C)?S.SEPARATE:S.FILMSTRIP,this.slideshowStyle===S.SEPARATE)this.slidesDirection=this.parentHasClass("slides-separate-up")?s.UP:this.parentHasClass("slides-separate-right")?s.RIGHT:this.parentHasClass("slides-separate-left")?s.LEFT:s.DOWN;else{this.slidesDirection=this.parentHasClass("slides-filmstrip-horizontal")?a.HORIZONTAL:a.VERTICAL;var n=this.parentHasClass(T)?y.LANDSCAPE_4_3:this.parentHasClass(E)?y.LANDSCAPE_16_9:this.parentHasClass(L)?y.PORTRAIT_4_3:this.parentHasClass(g)?y.PORTRAIT_16_9:this.parentHasClass(P)?y.SQUARE:y.FLEXIBLE;if(this.hasSpecificFormat(this.parent)&&this.parentHasClass("show-perforations"))switch(n){case y.LANDSCAPE_4_3:this.addPerforation(this.slidesDirection===a.VERTICAL?4:8);break;case y.SQUARE:this.addPerforation(4);break;case y.LANDSCAPE_16_9:this.addPerforation(this.slidesDirection===a.VERTICAL?3:12);break;case y.PORTRAIT_4_3:this.addPerforation(this.slidesDirection===a.VERTICAL?8:4);break;case y.PORTRAIT_16_9:this.addPerforation(this.slidesDirection===a.VERTICAL?12:3)}}this.hasSpecificFormat(this.parent)&&!this.isThereFlexibleFormatAmongSlides()||console.warn("It is not recommended to use flexible slide format!\nPlease use one of the following classes in the root div element or in a slide:\n- slide-format-4-3-landscape;\n- slide-format-16-9-landscape;\n- slide-format-4-3-portrait;\n- slide-format-16-9-portrait;\n- slide-format-square.\nSee https://github.com/vanjuxin-dju/filmstrip.js/wiki/Slide-formats"),this.automatedSwitchBetweenSlides=void 0!==this.parent.dataset.switchAfter?this.parent.dataset.switchAfter:null,this.slidesCount=document.getElementsByClassName(w).length,t&&t>1&&(this.currentSlide=t-2,this.nextSlide())}var t,i,n;return t=e,(i=[{key:"parentHasClass",value:function(e){return this.parent.classList.contains(e)}},{key:"addOldStyle",value:function(){for(var e=this.parent.children,t=0;t<e.length;t++)this.addOldFilmStyleToSlide(e[t])}},{key:"addOldFilmStyleToSlide",value:function(e){var t=document.createElement("div");t.classList.add("old-film"),e.append(t)}},{key:"hasSpecificFormat",value:function(e){var t=e.classList;return t.contains(T)||t.contains(E)||t.contains(L)||t.contains(g)||t.contains(P)}},{key:"addPerforation",value:function(e){var t=this,i=this.parent.children;if(!(Array.from(i).findIndex((function(e){return t.hasSpecificFormat(e)||e.classList.contains(I)}))>=0))for(var n=0;n<i.length;n++)this.addPerforationToSlide(i[n],e)}},{key:"addPerforationToSlide",value:function(e,t){var i=document.createElement("div");i.classList.add("perforation-wrapper"),e.append(i);for(var n=1;n<t;n++)i=i.cloneNode(!1),e.append(i)}},{key:"isThereFlexibleFormatAmongSlides",value:function(){var e=this.parent.children;return!!Array.from(e).find((function(e){return e.classList.contains(I)}))}},{key:"scrollSlide",value:function(e,t){var i=this,n=100,r=-100*this.currentSlide,c=1,d=1,u=function(){e===l?i.currentSlide++:i.currentSlide--};this.isBeginning()&&e===o||this.isEnding()&&e===l?t():this.slideshowStyle===S.SEPARATE?function a(o){setTimeout((function(){i.slidesDirection===s.UP?i.parent.style.top=-(o?100-d:d)+"vh":i.slidesDirection===s.RIGHT?i.parent.style.left=(o?100-d:d)+"vw":i.slidesDirection===s.LEFT?i.parent.style.left=-(o?100-d:d)+"vw":i.parent.style.top=(o?100-d:d)+"vh",d<50?c++:c>1&&c--,d+=c,o?d<=n?a(!0):(u(),i.isLoop&&i.isEnding()&&(i.currentSlide=0,i.slidesDirection===s.UP||i.slidesDirection===s.DOWN?i.parent.style.left="0vw":i.parent.style.top="0vh"),t()):d<=n?a(!1):(i.slidesDirection===s.UP||i.slidesDirection===s.DOWN?i.parent.style.left=(e===l?r-100:r+100)+"vw":i.parent.style.top=(e===l?r-100:r+100)+"vh",c=1,d=1,a(!0))}),20)}():function s(){setTimeout((function(){i.slidesDirection===a.VERTICAL?i.parent.style.top=(e===l?r-d:r+d)+"vh":i.parent.style.left=(e===l?r-d:r+d)+"vw",d<50?c++:c>1&&c--,(d+=c)<=n?s():(u(),i.isLoop&&i.isEnding()&&(i.currentSlide=0,i.slidesDirection===a.VERTICAL?i.parent.style.top="0vh":i.parent.style.left="0vw"),t())}),20)}()}},{key:"previousSlide",value:function(e){this.actionQueue.addAction(o,e)}},{key:"nextSlide",value:function(e){this.actionQueue.addAction(l,e)}},{key:"getSlidesDirection",value:function(){return this.slidesDirection}},{key:"getIsLoop",value:function(){return this.isLoop}},{key:"getDefaultTimeBetweenSlides",value:function(){return this.automatedSwitchBetweenSlides?parseInt(this.automatedSwitchBetweenSlides):0}},{key:"getCurrentSlideSwitchAfter",value:function(){var e=this.parent.children[this.currentSlide].dataset.switchAfter;return e?parseInt(e):0}},{key:"isBeginning",value:function(){return 0===this.currentSlide}},{key:"isEnding",value:function(){return this.currentSlide+1===this.slidesCount}}])&&v(t.prototype,i),n&&v(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();var R=new k(function(){var e=window.location.hash;e=e?e.substring(1):e;var t=parseInt(e);return window.location.hash="",Number.isNaN(t)?1:t}()),N=new u(R.getSlidesDirection()),D=new n(R.getIsLoop()),O=function(){var e=R.getCurrentSlideSwitchAfter();(Number.isNaN(e)||e<=0)&&(e=R.getDefaultTimeBetweenSlides()),Number.isNaN(e)||e<=0||D.setAutomatedSwitch(R.isEnding(),e,(function(){x()}))},_=function(){D.clearAutomatedSwitch(),R.previousSlide((function(){R.isBeginning()&&N.disablePreviousButton(),R.isEnding()||N.enableNextButton(),O()}))},x=function(){D.clearAutomatedSwitch(),R.nextSlide((function(){R.isBeginning()?N.disablePreviousButton():N.enablePreviousButton(),R.isEnding()&&N.disableNextButton(),O()}))};N.addPreviousSlideClickListener(_),N.addNextSlideClickListener(x),R.isBeginning()&&N.disablePreviousButton(),R.isEnding()&&N.disableNextButton(),O();var B,F,H,j=new Set(["ArrowLeft","ArrowUp"]),U=new Set(["ArrowRight","ArrowDown","Space","Enter","NumpadEnter"]);document.addEventListener("keyup",(function(e){j.has(e.code)?_():U.has(e.code)&&x()})),B=R.getSlidesDirection(),F=0,H=0,document.addEventListener("touchstart",(function(e){F=B===a.VERTICAL||B===s.UP||B===s.DOWN?e.changedTouches[0].screenY:e.changedTouches[0].screenX})),document.addEventListener("touchend",(function(e){(H=B===a.VERTICAL||B===s.UP||B===s.DOWN?e.changedTouches[0].screenY:e.changedTouches[0].screenX)<F?x():H>F&&_()}))})();