(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n(r.key),r)}}function i(t,e,i){return(e=n(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(e){var i=function(e,i){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,i||"default");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(e,"string");return"symbol"===t(i)?i:String(i)}var r,o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"timer",void 0),i(this,"isLoop",void 0),this.timer=null,this.isLoop=e}var n,r,o;return n=t,(r=[{key:"setAutomatedSwitch",value:function(t,e,i){this.clearAutomatedSwitch(),(!t||this.isLoop&&t)&&(this.timer=setTimeout((function(){i()}),1e3*e))}},{key:"clearAutomatedSwitch",value:function(){null!==this.timer&&clearTimeout(this.timer)}}])&&e(n.prototype,r),o&&e(n,o),Object.defineProperty(n,"prototype",{writable:!1}),t}();!function(t){t.UP="up",t.LEFT="left",t.RIGHT="right",t.DOWN="down"}(r||(r={}));const s=r;var a;!function(t){t.HORIZONTAL="horizontal",t.VERTICAL="vertical"}(a||(a={}));const l=a;var u="previous",c="next";function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function h(t,e,i){return(e=p(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function p(t){var e=function(t,e){if("object"!==d(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===d(e)?e:String(e)}const v=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,"previous",void 0),h(this,"next",void 0);var i=document.createElement("div");i.classList.add("overlay","overlay-"+e),i.innerHTML='<div class="previous-slide" name="previous">\n                                        <div class="arrow" title="Previous slide"></div>\n                                    </div>\n                                    <div class="next-slide" name="next">\n                                        <div class="arrow" title="Next slide"></div>\n                                    </div>',document.body.append(i),this.previous=i.children.namedItem(u),this.next=i.children.namedItem(c)}var e,i,n;return e=t,(i=[{key:"addNextSlideClickListener",value:function(t){this.next.children[0].onclick=function(e){t()}}},{key:"addPreviousSlideClickListener",value:function(t){this.previous.children[0].onclick=function(e){t()}}},{key:"disablePreviousButton",value:function(){this.previous.classList.add("disabled")}},{key:"enablePreviousButton",value:function(){this.previous.classList.remove("disabled")}},{key:"disableNextButton",value:function(){this.next.classList.add("disabled")}},{key:"enableNextButton",value:function(){this.next.classList.remove("disabled")}}])&&f(e.prototype,i),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function y(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,S(n.key),n)}}function b(t,e,i){return(e=S(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function S(t){var e=function(t,e){if("object"!==m(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===m(e)?e:String(e)}const w=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),b(this,"firstItem",void 0),b(this,"lastItem",void 0),b(this,"context",void 0),b(this,"func",void 0),this.firstItem=null,this.lastItem=null,this.context=e,this.func=i}var e,i,n;return e=t,(i=[{key:"addAction",value:function(t,e){var i=!1,n={action:t,callback:void 0===e?null:e,next:null};null===this.firstItem&&(this.firstItem=n,i=!0),null!==this.lastItem&&(this.lastItem.next=n),this.lastItem=n,i&&this.goThrough()}},{key:"goThrough",value:function(){var t=this;null!==this.firstItem?this.func.call(this.context,this.firstItem.action,(function(){null!==t.firstItem&&(null!==t.firstItem.callback&&t.firstItem.callback(),t.firstItem=t.firstItem.next,t.goThrough())})):this.lastItem=null}}])&&y(e.prototype,i),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function A(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,P(n.key),n)}}function T(t,e,i){return(e=P(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function P(t){var e=function(t,e){if("object"!==g(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===g(e)?e:String(e)}var E,L,I="slides",C="slide",k=C+"-format-",R=k+"4-3-landscape",N=k+"16-9-landscape",D=k+"4-3-portrait",O=k+"16-9-portrait",_=k+"square",x=k+"flexible",B=I+"-separate",j=B+"-up",F=B+"-left",H=B+"-right",U=I+"-filmstrip-horizontal";!function(t){t[t.SEPARATE=0]="SEPARATE",t[t.FILMSTRIP=1]="FILMSTRIP"}(E||(E={})),function(t){t[t.FLEXIBLE=0]="FLEXIBLE",t[t.SQUARE=1]="SQUARE",t[t.LANDSCAPE_4_3=2]="LANDSCAPE_4_3",t[t.LANDSCAPE_16_9=3]="LANDSCAPE_16_9",t[t.PORTRAIT_4_3=4]="PORTRAIT_4_3",t[t.PORTRAIT_16_9=5]="PORTRAIT_16_9"}(L||(L={}));var V=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),T(this,"currentSlide",void 0),T(this,"actionQueue",void 0),T(this,"parent",void 0),T(this,"isLoop",void 0),T(this,"slideshowStyle",void 0),T(this,"slidesDirection",void 0),T(this,"slidesCount",void 0),T(this,"automatedSwitchBetweenSlides",void 0),this.currentSlide=0,this.actionQueue=new w(this,this.scrollSlide),this.parent=document.getElementsByClassName(I)[0],this.isLoop=!!this.parent.dataset.loop,this.isLoop){var i=this.parent.children[0].cloneNode(!0);this.parent.append(i)}if(this.hasSpecificFormat(this.parent)&&this.parentHasClass("show-old-film-style")&&this.addOldStyle(),this.slideshowStyle=this.parentHasClass(B)?E.SEPARATE:E.FILMSTRIP,this.slideshowStyle===E.SEPARATE)this.slidesDirection=this.parentHasClass(j)?s.UP:this.parentHasClass(H)?s.RIGHT:this.parentHasClass(F)?s.LEFT:s.DOWN;else{this.slidesDirection=this.parentHasClass(U)?l.HORIZONTAL:l.VERTICAL;var n=this.parentHasClass(R)?L.LANDSCAPE_4_3:this.parentHasClass(N)?L.LANDSCAPE_16_9:this.parentHasClass(D)?L.PORTRAIT_4_3:this.parentHasClass(O)?L.PORTRAIT_16_9:this.parentHasClass(_)?L.SQUARE:L.FLEXIBLE;if(this.hasSpecificFormat(this.parent)&&this.parentHasClass("show-perforations"))switch(n){case L.LANDSCAPE_4_3:this.addPerforation(this.slidesDirection===l.VERTICAL?4:8);break;case L.SQUARE:this.addPerforation(4);break;case L.LANDSCAPE_16_9:this.addPerforation(this.slidesDirection===l.VERTICAL?3:12);break;case L.PORTRAIT_4_3:this.addPerforation(this.slidesDirection===l.VERTICAL?8:4);break;case L.PORTRAIT_16_9:this.addPerforation(this.slidesDirection===l.VERTICAL?12:3)}}this.hasSpecificFormat(this.parent)&&!this.isThereFlexibleFormatAmongSlides()||console.warn("It is not recommended to use flexible slide format!\nPlease use one of the following classes in the root div element or in a slide:\n- slide-format-4-3-landscape;\n- slide-format-16-9-landscape;\n- slide-format-4-3-portrait;\n- slide-format-16-9-portrait;\n- slide-format-square.\nSee https://github.com/vanjuxin-dju/filmstrip.js/wiki/Slide-formats"),this.automatedSwitchBetweenSlides=void 0!==this.parent.dataset.switchAfter?this.parent.dataset.switchAfter:null,this.slidesCount=document.getElementsByClassName(C).length,e&&e>1&&(this.currentSlide=e-2,this.nextSlide())}var e,i,n;return e=t,(i=[{key:"parentHasClass",value:function(t){return this.parent.classList.contains(t)}},{key:"addOldStyle",value:function(){for(var t=this.parent.children,e=0;e<t.length;e++)this.addOldFilmStyleToSlide(t[e])}},{key:"addOldFilmStyleToSlide",value:function(t){var e=document.createElement("div");e.classList.add("old-film"),t.append(e)}},{key:"hasSpecificFormat",value:function(t){var e=t.classList;return e.contains(R)||e.contains(N)||e.contains(D)||e.contains(O)||e.contains(_)}},{key:"addPerforation",value:function(t){var e=this,i=this.parent.children;if(!(Array.from(i).findIndex((function(t){return e.hasSpecificFormat(t)||t.classList.contains(x)}))>=0))for(var n=0;n<i.length;n++)this.addPerforationToSlide(i[n],t)}},{key:"addPerforationToSlide",value:function(t,e){var i=document.createElement("div");i.classList.add("perforation-wrapper"),t.append(i);for(var n=1;n<e;n++)i=i.cloneNode(!1),t.append(i)}},{key:"isThereFlexibleFormatAmongSlides",value:function(){var t=this.parent.children;return!!Array.from(t).find((function(t){return t.classList.contains(x)}))}},{key:"scrollSlide",value:function(t,e){var i=this,n=100,r=-100*this.currentSlide,o=1,a=1,d=function(){t===c?i.currentSlide++:i.currentSlide--};this.isBeginning()&&t===u||this.isEnding()&&t===c?e():this.slideshowStyle===E.SEPARATE?function l(u){setTimeout((function(){i.slidesDirection===s.UP?i.parent.style.top=-(u?100-a:a)+"vh":i.slidesDirection===s.RIGHT?i.parent.style.left=(u?100-a:a)+"vw":i.slidesDirection===s.LEFT?i.parent.style.left=-(u?100-a:a)+"vw":i.parent.style.top=(u?100-a:a)+"vh",a<50?o++:o>1&&o--,a+=o,u?a<=n?l(!0):(d(),i.isLoop&&i.isEnding()&&(i.currentSlide=0,i.slidesDirection===s.UP||i.slidesDirection===s.DOWN?i.parent.style.left="0vw":i.parent.style.top="0vh"),e()):a<=n?l(!1):(i.slidesDirection===s.UP||i.slidesDirection===s.DOWN?i.parent.style.left=(t===c?r-100:r+100)+"vw":i.parent.style.top=(t===c?r-100:r+100)+"vh",o=1,a=1,l(!0))}),20)}():function s(){setTimeout((function(){i.slidesDirection===l.VERTICAL?i.parent.style.top=(t===c?r-a:r+a)+"vh":i.parent.style.left=(t===c?r-a:r+a)+"vw",a<50?o++:o>1&&o--,(a+=o)<=n?s():(d(),i.isLoop&&i.isEnding()&&(i.currentSlide=0,i.slidesDirection===l.VERTICAL?i.parent.style.top="0vh":i.parent.style.left="0vw"),e())}),20)}()}},{key:"previousSlide",value:function(t){this.actionQueue.addAction(u,t)}},{key:"nextSlide",value:function(t){this.actionQueue.addAction(c,t)}},{key:"getSlidesDirection",value:function(){return this.slidesDirection}},{key:"getIsLoop",value:function(){return this.isLoop}},{key:"getDefaultTimeBetweenSlides",value:function(){return this.automatedSwitchBetweenSlides?parseInt(this.automatedSwitchBetweenSlides):0}},{key:"getCurrentSlideSwitchAfter",value:function(){var t=this.parent.children[this.currentSlide].dataset.switchAfter;return t?parseInt(t):0}},{key:"isBeginning",value:function(){return 0===this.currentSlide}},{key:"isEnding",value:function(){return this.currentSlide+1===this.slidesCount}}])&&A(e.prototype,i),n&&A(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();var Q=new V(function(){var t=window.location.hash;t=t?t.substring(1):t;var e=parseInt(t);return window.location.hash="",Number.isNaN(e)?1:e}()),W=new v(Q.getSlidesDirection()),X=new o(Q.getIsLoop()),M=function(){var t=Q.getCurrentSlideSwitchAfter();(Number.isNaN(t)||t<=0)&&(t=Q.getDefaultTimeBetweenSlides()),Number.isNaN(t)||t<=0||X.setAutomatedSwitch(Q.isEnding(),t,(function(){q()}))},G=function(){X.clearAutomatedSwitch(),Q.previousSlide((function(){Q.isBeginning()&&W.disablePreviousButton(),Q.isEnding()||W.enableNextButton(),M()}))},q=function(){X.clearAutomatedSwitch(),Q.nextSlide((function(){Q.isBeginning()?W.disablePreviousButton():W.enablePreviousButton(),Q.isEnding()&&W.disableNextButton(),M()}))};W.addPreviousSlideClickListener(G),W.addNextSlideClickListener(q),Q.isBeginning()&&W.disablePreviousButton(),Q.isEnding()&&W.disableNextButton(),M();var z,Y,Z,J=new Set(["ArrowLeft","ArrowUp"]),K=new Set(["ArrowRight","ArrowDown","Space","Enter","NumpadEnter"]);document.addEventListener("keyup",(function(t){J.has(t.code)?G():K.has(t.code)&&q()})),z=Q.getSlidesDirection(),Y=0,Z=0,document.addEventListener("touchstart",(function(t){Y=z===l.VERTICAL||z===s.UP||z===s.DOWN?t.changedTouches[0].screenY:t.changedTouches[0].screenX})),document.addEventListener("touchend",(function(t){(Z=z===l.VERTICAL||z===s.UP||z===s.DOWN?t.changedTouches[0].screenY:t.changedTouches[0].screenX)<Y?q():Z>Y&&G()}))})();