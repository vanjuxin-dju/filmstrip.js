(()=>{"use strict";var e={SLIDES:"slides",SLIDE:"slide"};e.SLIDES_SEPARATE=e.SLIDES+"-separate",e.SLIDES_SEPARATE_UP=e.SLIDES_SEPARATE+"-up",e.SLIDES_SEPARATE_LEFT=e.SLIDES_SEPARATE+"-left",e.SLIDES_SEPARATE_RIGHT=e.SLIDES_SEPARATE+"-right",e.SLIDES_FILMSTRIP_HORIZONTAL=e.SLIDES+"-filmstrip-horizontal";var t=e.SLIDE+"-format-";e.SLIDE_FORMAT_4_3_LANDSCAPE=t+"4-3-landscape",e.SLIDE_FORMAT_16_9_LANDSCAPE=t+"16-9-landscape",e.SLIDE_FORMAT_4_3_PORTRAIT=t+"4-3-portrait",e.SLIDE_FORMAT_16_9_PORTRAIT=t+"16-9-portrait",e.SLIDE_FORMAT_SQUARE=t+"square",e.SLIDE_FORMAT_FLEXIBLE=t+"flexible",e.SHOW_PERFORATIONS="show-perforations",e.PERFORATION_WRAPPER="perforation-wrapper";const n={SLIDESHOW_TYPE:{SEPARATE:"separate",FILMSTRIP:"filmstrip"},SEPARATE_SLIDES_DIRECTION:{UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right"},FILMSTRIP_DIRECTION:{HORIZONTAL:"horizontal",VERTICAL:"vertical"},SLIDE_FORMAT:{FLEXIBLE:"flexible",SQUARE:"square",LANDSCAPE_4_3:"4:3-landscape",LANDSCAPE_16_9:"16:9-landscape",PORTRAIT_4_3:"4:3-portrait",PORTRAIT_16_9:"16:9-portrait"},CLASSES:e,SWITCHES:{PREVIOUS:"previous",NEXT:"next"},FLEXIBLE_WARNING_MESSAGE:"It is not recommended to use flexible slide format!\nPlease use one of the following classes in the root div element or in a slide:\n- slide-format-4-3-landscape;\n- slide-format-16-9-landscape;\n- slide-format-4-3-portrait;\n- slide-format-16-9-portrait;\n- slide-format-square.\nSee https://github.com/vanjuxin-dju/filmstrip.js/wiki/Slide-formats",hasSpecificFormat:function(t){var n=t.classList;return n.contains(e.SLIDE_FORMAT_4_3_LANDSCAPE)||n.contains(e.SLIDE_FORMAT_16_9_LANDSCAPE)||n.contains(e.SLIDE_FORMAT_4_3_PORTRAIT)||n.contains(e.SLIDE_FORMAT_16_9_PORTRAIT)||n.contains(e.SLIDE_FORMAT_SQUARE)},addPerforationToSlide:function(t,n){var i=document.createElement("div");i.classList.add(e.PERFORATION_WRAPPER),t.append(i);for(var r=1;r<n;r++)i=i.cloneNode(!1),t.append(i)}};function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){a(e,t),t.set(e,n)}function a(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function s(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function o(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,c(e,t,"set"),n),n}function l(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,c(e,t,"get"))}function c(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var S=new WeakMap,E=new WeakMap,u=new WeakSet,d=function(){function e(t,n){var i,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(i=this,s=u),s.add(i),r(this,S,{writable:!0,value:null}),r(this,E,{writable:!0,value:null}),this._context=t,this._func=n}var t,n,c;return t=e,(n=[{key:"addAction",value:function(e,t){var n=!1,i={action:e,callback:t,next:null};null===l(this,S)&&(o(this,S,i),n=!0),null!==l(this,E)&&(l(this,E).next=i),o(this,E,i),n&&s(this,u,h).call(this)}}])&&i(t.prototype,n),c&&i(t,c),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(){var e=this;null!==l(this,S)?this._func.call(this._context,l(this,S).action,(function(){l(e,S).callback&&l(e,S).callback(),o(e,S,l(e,S).next),s(e,u,h).call(e)})):o(this,E,null)}function _(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function I(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function T(e,t){A(e,t),t.add(e)}function A(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function L(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,R(e,t,"get"))}function p(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,R(e,t,"set"),n),n}function R(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function v(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var D=new WeakMap,w=new WeakSet,P=new WeakSet,O=new WeakSet,y=new WeakSet,m=function(){function e(t){var i,r,a;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),T(this,y),T(this,O),T(this,P),T(this,w),a={writable:!0,value:0},A(i=this,r=D),r.set(i,a),this._actionQueue=new d(this,v(this,y,g)),this._parent=document.getElementsByClassName(n.CLASSES.SLIDES)[0],this._isLoop=!!this._parent.dataset.loop,this._isLoop){var s=this._parent.children[0].cloneNode(!0);this._parent.append(s)}if(this._slideshowStyle=v(this,O,N).call(this,n.CLASSES.SLIDES_SEPARATE)?n.SLIDESHOW_TYPE.SEPARATE:n.SLIDESHOW_TYPE.FILMSTRIP,this._slideshowStyle===n.SLIDESHOW_TYPE.SEPARATE)this._slidesDirection=v(this,O,N).call(this,n.CLASSES.SLIDES_SEPARATE_UP)?n.SEPARATE_SLIDES_DIRECTION.UP:v(this,O,N).call(this,n.CLASSES.SLIDES_SEPARATE_RIGHT)?n.SEPARATE_SLIDES_DIRECTION.RIGHT:v(this,O,N).call(this,n.CLASSES.SLIDES_SEPARATE_LEFT)?n.SEPARATE_SLIDES_DIRECTION.LEFT:n.SEPARATE_SLIDES_DIRECTION.DOWN;else{this._slidesDirection=v(this,O,N).call(this,n.CLASSES.SLIDES_FILMSTRIP_HORIZONTAL)?n.FILMSTRIP_DIRECTION.HORIZONTAL:n.FILMSTRIP_DIRECTION.VERTICAL;var o=v(this,O,N).call(this,n.CLASSES.SLIDE_FORMAT_4_3_LANDSCAPE)?n.SLIDE_FORMAT.LANDSCAPE_4_3:v(this,O,N).call(this,n.CLASSES.SLIDE_FORMAT_16_9_LANDSCAPE)?n.SLIDE_FORMAT.LANDSCAPE_16_9:v(this,O,N).call(this,n.CLASSES.SLIDE_FORMAT_4_3_PORTRAIT)?n.SLIDE_FORMAT.PORTRAIT_4_3:v(this,O,N).call(this,n.CLASSES.SLIDE_FORMAT_16_9_PORTRAIT)?n.SLIDE_FORMAT.PORTRAIT_16_9:v(this,O,N).call(this,n.CLASSES.SLIDE_FORMAT_SQUARE)?n.SLIDE_FORMAT.SQUARE:n.SLIDE_FORMAT.FLEXIBLE;if(n.hasSpecificFormat(this._parent)&&v(this,O,N).call(this,n.CLASSES.SHOW_PERFORATIONS))switch(o){case n.SLIDE_FORMAT.LANDSCAPE_4_3:v(this,w,C).call(this,this._slidesDirection===n.FILMSTRIP_DIRECTION.VERTICAL?4:8);break;case n.SLIDE_FORMAT.SQUARE:v(this,w,C).call(this,4);break;case n.SLIDE_FORMAT.LANDSCAPE_16_9:v(this,w,C).call(this,this._slidesDirection===n.FILMSTRIP_DIRECTION.VERTICAL?3:12);break;case n.SLIDE_FORMAT.PORTRAIT_4_3:v(this,w,C).call(this,this._slidesDirection===n.FILMSTRIP_DIRECTION.VERTICAL?8:4);break;case n.SLIDE_FORMAT.PORTRAIT_16_9:v(this,w,C).call(this,this._slidesDirection===n.FILMSTRIP_DIRECTION.VERTICAL?12:3)}}n.hasSpecificFormat(this._parent)&&!v(this,P,b).call(this)||console.warn(n.FLEXIBLE_WARNING_MESSAGE),this._automatedSwitchBetweenSlides=this._parent.dataset.switchAfter,this._slidesCount=document.getElementsByClassName(n.CLASSES.SLIDE).length,t&&t>1&&(p(this,D,t-2),this.nextSlide())}var t,i,r;return t=e,(i=[{key:"previousSlide",value:function(e){this._actionQueue.addAction(n.SWITCHES.PREVIOUS,e)}},{key:"nextSlide",value:function(e){this._actionQueue.addAction(n.SWITCHES.NEXT,e)}},{key:"slidesDirection",get:function(){return this._slidesDirection}},{key:"isLoop",get:function(){return this._isLoop}},{key:"defaultTimeBetweenSlides",get:function(){return this._automatedSwitchBetweenSlides?parseInt(this._automatedSwitchBetweenSlides):0}},{key:"getCurrentSlideSwitchAfter",value:function(){var e=this._parent.children[L(this,D)].dataset.switchAfter;return e?parseInt(e):0}},{key:"isBeginning",value:function(){return 0===L(this,D)}},{key:"isEnding",value:function(){return L(this,D)+1===this._slidesCount}}])&&I(t.prototype,i),r&&I(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function C(e){var t=this._parent.children;if(!(_(t).findIndex((function(e){return n.hasSpecificFormat(e)||e.classList.contains(n.CLASSES.SLIDE_FORMAT_FLEXIBLE)}))>=0))for(var i=0;i<t.length;i++)n.addPerforationToSlide(t[i],e)}function b(){return!!_(this._parent.children).find((function(e){return e.classList.contains(n.CLASSES.SLIDE_FORMAT_FLEXIBLE)}))}function N(e){return this._parent.classList.contains(e)}function g(e,t){var i=this,r=100,a=-100*L(this,D),s=1,o=1,l=function(){var t,r;e===n.SWITCHES.NEXT?p(i,D,(t=L(i,D),t++,t)):p(i,D,(r=L(i,D),r--,r))};this.isBeginning()&&e===n.SWITCHES.PREVIOUS||this.isEnding()&&e===n.SWITCHES.NEXT?t():this._slideshowStyle===n.SLIDESHOW_TYPE.SEPARATE?function c(S){setTimeout((function(){i._slidesDirection===n.SEPARATE_SLIDES_DIRECTION.UP?i._parent.style.top=-(S?100-o:o)+"vh":i._slidesDirection===n.SEPARATE_SLIDES_DIRECTION.RIGHT?i._parent.style.left=(S?100-o:o)+"vw":i._slidesDirection===n.SEPARATE_SLIDES_DIRECTION.LEFT?i._parent.style.left=-(S?100-o:o)+"vw":i._parent.style.top=(S?100-o:o)+"vh",o<50?s++:s>1&&s--,o+=s,S?o<=r?c(!0):(l(),i._isLoop&&i.isEnding()&&(p(i,D,0),i._slidesDirection===n.SEPARATE_SLIDES_DIRECTION.UP||i._slidesDirection===n.SEPARATE_SLIDES_DIRECTION.DOWN?i._parent.style.left="0vw":i._parent.style.top="0vh"),t()):o<=r?c(!1):(i._slidesDirection===n.SEPARATE_SLIDES_DIRECTION.UP||i._slidesDirection===n.SEPARATE_SLIDES_DIRECTION.DOWN?i._parent.style.left=(e===n.SWITCHES.NEXT?a-100:a+100)+"vw":i._parent.style.top=(e===n.SWITCHES.NEXT?a-100:a+100)+"vh",s=1,o=1,c(!0))}),20)}():function c(){setTimeout((function(){i._slidesDirection===n.FILMSTRIP_DIRECTION.VERTICAL?i._parent.style.top=(e===n.SWITCHES.NEXT?a-o:a+o)+"vh":i._parent.style.left=(e===n.SWITCHES.NEXT?a-o:a+o)+"vw",o<50?s++:s>1&&s--,(o+=s)<=r?c():(l(),i._isLoop&&i.isEnding()&&(p(i,D,0),i._slidesDirection===n.FILMSTRIP_DIRECTION.VERTICAL?i._parent.style.top="0vh":i._parent.style.left="0vw"),t())}),20)}()}function F(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var M=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.overlayElement=document.createElement("div"),this.overlayElement.classList.add("overlay","overlay-"+t),this.overlayElement.innerHTML='<div class="previous-slide" name="previous">\n                                            <div class="arrow" title="Previous slide"></div>\n                                        </div>\n                                        <div class="next-slide" name="next">\n                                            <div class="arrow" title="Next slide"></div>\n                                        </div>',document.body.append(this.overlayElement)}var t,n,i;return t=e,(n=[{key:"addNextSlideClickListener",value:function(e){this.overlayElement.children.next.children[0].onclick=e}},{key:"addPreviousSlideClickListener",value:function(e){this.overlayElement.children.previous.children[0].onclick=e}},{key:"disablePreviousButton",value:function(){this.overlayElement.children.previous.classList.add("disabled")}},{key:"enablePreviousButton",value:function(){this.overlayElement.children.previous.classList.remove("disabled")}},{key:"disableNextButton",value:function(){this.overlayElement.children.next.classList.add("disabled")}},{key:"enableNextButton",value:function(){this.overlayElement.children.next.classList.remove("disabled")}}])&&F(t.prototype,n),i&&F(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function k(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function W(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function B(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,H(e,t,"get"))}function x(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,H(e,t,"set"),n),n}function H(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var U=new WeakMap,j=new WeakMap,X=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),W(this,U,{writable:!0,value:null}),W(this,j,{writable:!0,value:!1}),x(this,j,t)}var t,n,i;return t=e,(n=[{key:"setAutomatedSwitch",value:function(e,t,n){clearTimeout(B(this,U)),(!e||B(this,j)&&e)&&x(this,U,setTimeout((function(){n()}),1e3*t))}},{key:"clearAutomatedSwitch",value:function(){clearTimeout(B(this,U))}}])&&k(t.prototype,n),i&&k(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),V=new m(function(){var e=window.location.hash;e=e?e.substring(1):e;var t=parseInt(e);return window.location.hash="",Number.isNaN(t)?1:t}()),G=new M(V.slidesDirection),Q=new X(V.isLoop),Y=function(){var e=V.getCurrentSlideSwitchAfter();(Number.isNaN(e)||e<=0)&&(e=V.defaultTimeBetweenSlides),Number.isNaN(e)||e<=0||Q.setAutomatedSwitch(V.isEnding(),e,(function(){Z()}))},z=function(){Q.clearAutomatedSwitch(),V.previousSlide((function(){V.isBeginning()&&G.disablePreviousButton(),V.isEnding()||G.enableNextButton(),Y()}))},Z=function(){Q.clearAutomatedSwitch(),V.nextSlide((function(){V.isBeginning()?G.disablePreviousButton():G.enablePreviousButton(),V.isEnding()&&G.disableNextButton(),Y()}))};G.addPreviousSlideClickListener(z),G.addNextSlideClickListener(Z),V.isBeginning()&&G.disablePreviousButton(),V.isEnding()&&G.disableNextButton(),Y();var q,$,J,K=new Set(["ArrowLeft","ArrowUp"]),ee=new Set(["ArrowRight","ArrowDown","Space","Enter","NumpadEnter"]);document.addEventListener("keyup",(function(e){K.has(e.code)?z():ee.has(e.code)&&Z()})),q=V.slidesDirection,$=0,J=0,document.addEventListener("touchstart",(function(e){$="vertical"===q||"up"===q||"down"===q?e.changedTouches[0].screenY:e.changedTouches[0].screenX})),document.addEventListener("touchend",(function(e){(J="vertical"===q||"up"===q||"down"===q?e.changedTouches[0].screenY:e.changedTouches[0].screenX)<$?Z():J>$&&z()}))})();