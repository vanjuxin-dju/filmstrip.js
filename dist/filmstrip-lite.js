(()=>{"use strict";var t;!function(t){t.UP="up",t.LEFT="left",t.RIGHT="right",t.DOWN="down"}(t||(t={}));const e=t;var i;!function(t){t.HORIZONTAL="horizontal",t.VERTICAL="vertical"}(i||(i={}));const n=i;var r="previous",s="next";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function l(t,e,i){return(e=u(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function u(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}const c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,"previous",void 0),l(this,"next",void 0);var i=document.createElement("div");i.classList.add("overlay","overlay-"+e),i.innerHTML='<div class="previous-slide" name="previous">\n                                        <div class="arrow" title="Previous slide"></div>\n                                    </div>\n                                    <div class="next-slide" name="next">\n                                        <div class="arrow" title="Next slide"></div>\n                                    </div>',document.body.append(i),this.previous=i.children.namedItem(r),this.next=i.children.namedItem(s)}var e,i,n;return e=t,(i=[{key:"addNextSlideClickListener",value:function(t){this.next.children[0].onclick=function(e){t()}}},{key:"addPreviousSlideClickListener",value:function(t){this.previous.children[0].onclick=function(e){t()}}},{key:"disablePreviousButton",value:function(){this.previous.classList.add("disabled")}},{key:"enablePreviousButton",value:function(){this.previous.classList.remove("disabled")}},{key:"disableNextButton",value:function(){this.next.classList.add("disabled")}},{key:"enableNextButton",value:function(){this.next.classList.remove("disabled")}}])&&a(e.prototype,i),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function h(t,e,i){return(e=p(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function p(t){var e=function(t,e){if("object"!==d(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===d(e)?e:String(e)}const v=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,"firstItem",void 0),h(this,"lastItem",void 0),h(this,"context",void 0),h(this,"func",void 0),this.firstItem=null,this.lastItem=null,this.context=e,this.func=i}var e,i,n;return e=t,(i=[{key:"addAction",value:function(t,e){var i=!1,n={action:t,callback:void 0===e?null:e,next:null};null===this.firstItem&&(this.firstItem=n,i=!0),null!==this.lastItem&&(this.lastItem.next=n),this.lastItem=n,i&&this.goThrough()}},{key:"goThrough",value:function(){var t=this;null!==this.firstItem?this.func.call(this.context,this.firstItem.action,(function(){null!==t.firstItem&&(null!==t.firstItem.callback&&t.firstItem.callback(),t.firstItem=t.firstItem.next,t.goThrough())})):this.lastItem=null}}])&&f(e.prototype,i),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();var m;!function(t){t[t.FLEXIBLE=0]="FLEXIBLE",t[t.SQUARE=1]="SQUARE",t[t.LANDSCAPE_4_3=2]="LANDSCAPE_4_3",t[t.LANDSCAPE_16_9=3]="LANDSCAPE_16_9",t[t.PORTRAIT_4_3=4]="PORTRAIT_4_3",t[t.PORTRAIT_16_9=5]="PORTRAIT_16_9"}(m||(m={}));const y=m;var b="slide-format-",S=b+"4-3-landscape",w=b+"16-9-landscape",g=b+"4-3-portrait",E=b+"16-9-portrait",A=b+"square";const T={hasSpecificFormat:function(t){var e=t.classList;return e.contains(S)||e.contains(w)||e.contains(g)||e.contains(E)||e.contains(A)}};function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function I(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,C(n.key),n)}}function L(t,e,i){return(e=C(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function C(t){var e=function(t,e){if("object"!==P(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===P(e)?e:String(e)}var R,k="slides",N="slide",D=N+"-format-",x=D+"4-3-landscape",B=D+"16-9-landscape",O=D+"4-3-portrait",_=D+"16-9-portrait",H=D+"square",j=D+"flexible",F=k+"-separate",U=F+"-up",Q=F+"-left",V=F+"-right",W=k+"-filmstrip-horizontal";!function(t){t[t.SEPARATE=0]="SEPARATE",t[t.FILMSTRIP=1]="FILMSTRIP"}(R||(R={}));var X=function(){function t(i,r,s){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),L(this,"currentSlide",void 0),L(this,"actionQueue",void 0),L(this,"parent",void 0),L(this,"isLoop",void 0),L(this,"slideshowStyle",void 0),L(this,"slidesDirection",void 0),L(this,"slidesCount",void 0),L(this,"automatedSwitchBetweenSlides",void 0),this.currentSlide=0,this.actionQueue=new v(this,this.scrollSlide),this.parent=document.getElementsByClassName(k)[0],this.isLoop=!!this.parent.dataset.loop,this.isLoop){var o=this.parent.children[0].cloneNode(!0);this.parent.append(o)}if(T.hasSpecificFormat(this.parent)&&this.parentHasClass("show-old-film-style")&&s&&s.oldify(this.parent),this.slideshowStyle=this.parentHasClass(F)?R.SEPARATE:R.FILMSTRIP,this.slideshowStyle===R.SEPARATE)this.slidesDirection=this.parentHasClass(U)?e.UP:this.parentHasClass(V)?e.RIGHT:this.parentHasClass(Q)?e.LEFT:e.DOWN;else{this.slidesDirection=this.parentHasClass(W)?n.HORIZONTAL:n.VERTICAL;var a=this.parentHasClass(x)?y.LANDSCAPE_4_3:this.parentHasClass(B)?y.LANDSCAPE_16_9:this.parentHasClass(O)?y.PORTRAIT_4_3:this.parentHasClass(_)?y.PORTRAIT_16_9:this.parentHasClass(H)?y.SQUARE:y.FLEXIBLE;T.hasSpecificFormat(this.parent)&&this.parentHasClass("show-perforations")&&r&&r.perforate(this.parent,a,this.slidesDirection)}T.hasSpecificFormat(this.parent)&&!this.isThereFlexibleFormatAmongSlides()||console.warn("It is not recommended to use flexible slide format!\nPlease use one of the following classes in the root div element or in a slide:\n- slide-format-4-3-landscape;\n- slide-format-16-9-landscape;\n- slide-format-4-3-portrait;\n- slide-format-16-9-portrait;\n- slide-format-square.\nSee https://github.com/vanjuxin-dju/filmstrip.js/wiki/Slide-formats"),this.automatedSwitchBetweenSlides=void 0!==this.parent.dataset.switchAfter?this.parent.dataset.switchAfter:null,this.slidesCount=document.getElementsByClassName(N).length,i&&i>1&&(this.currentSlide=i-2,this.nextSlide())}var i,o,a;return i=t,(o=[{key:"parentHasClass",value:function(t){return this.parent.classList.contains(t)}},{key:"isThereFlexibleFormatAmongSlides",value:function(){var t=this.parent.children;return!!Array.from(t).find((function(t){return t.classList.contains(j)}))}},{key:"scrollSlide",value:function(t,i){var o=this,a=100,l=-100*this.currentSlide,u=1,c=1,d=function(){t===s?o.currentSlide++:o.currentSlide--};this.isBeginning()&&t===r||this.isEnding()&&t===s?i():this.slideshowStyle===R.SEPARATE?function n(r){setTimeout((function(){o.slidesDirection===e.UP?o.parent.style.top=-(r?100-c:c)+"vh":o.slidesDirection===e.RIGHT?o.parent.style.left=(r?100-c:c)+"vw":o.slidesDirection===e.LEFT?o.parent.style.left=-(r?100-c:c)+"vw":o.parent.style.top=(r?100-c:c)+"vh",c<50?u++:u>1&&u--,c+=u,r?c<=a?n(!0):(d(),o.isLoop&&o.isEnding()&&(o.currentSlide=0,o.slidesDirection===e.UP||o.slidesDirection===e.DOWN?o.parent.style.left="0vw":o.parent.style.top="0vh"),i()):c<=a?n(!1):(o.slidesDirection===e.UP||o.slidesDirection===e.DOWN?o.parent.style.left=(t===s?l-100:l+100)+"vw":o.parent.style.top=(t===s?l-100:l+100)+"vh",u=1,c=1,n(!0))}),20)}():function e(){setTimeout((function(){o.slidesDirection===n.VERTICAL?o.parent.style.top=(t===s?l-c:l+c)+"vh":o.parent.style.left=(t===s?l-c:l+c)+"vw",c<50?u++:u>1&&u--,(c+=u)<=a?e():(d(),o.isLoop&&o.isEnding()&&(o.currentSlide=0,o.slidesDirection===n.VERTICAL?o.parent.style.top="0vh":o.parent.style.left="0vw"),i())}),20)}()}},{key:"previousSlide",value:function(t){this.actionQueue.addAction(r,t)}},{key:"nextSlide",value:function(t){this.actionQueue.addAction(s,t)}},{key:"getSlidesDirection",value:function(){return this.slidesDirection}},{key:"getIsLoop",value:function(){return this.isLoop}},{key:"getDefaultTimeBetweenSlides",value:function(){return this.automatedSwitchBetweenSlides?parseInt(this.automatedSwitchBetweenSlides):0}},{key:"getCurrentSlideSwitchAfter",value:function(){var t=this.parent.children[this.currentSlide].dataset.switchAfter;return t?parseInt(t):0}},{key:"isBeginning",value:function(){return 0===this.currentSlide}},{key:"isEnding",value:function(){return this.currentSlide+1===this.slidesCount}}])&&I(i.prototype,o),a&&I(i,a),Object.defineProperty(i,"prototype",{writable:!1}),t}();var M=new X(function(){var t=window.location.hash;t=t?t.substring(1):t;var e=parseInt(t);return window.location.hash="",Number.isNaN(e)?1:e}()),q=new c(M.getSlidesDirection()),G=function(){M.previousSlide((function(){M.isBeginning()&&q.disablePreviousButton(),M.isEnding()||q.enableNextButton()}))},z=function(){M.nextSlide((function(){M.isBeginning()?q.disablePreviousButton():q.enablePreviousButton(),M.isEnding()&&q.disableNextButton()}))};q.addPreviousSlideClickListener(G),q.addNextSlideClickListener(z),M.isBeginning()&&q.disablePreviousButton(),M.isEnding()&&q.disableNextButton();var Y,Z,J,K=new Set(["ArrowLeft","ArrowUp"]),$=new Set(["ArrowRight","ArrowDown","Space","Enter","NumpadEnter"]);document.addEventListener("keyup",(function(t){K.has(t.code)?G():$.has(t.code)&&z()})),Y=M.getSlidesDirection(),Z=0,J=0,document.addEventListener("touchstart",(function(t){Z=Y===n.VERTICAL||Y===e.UP||Y===e.DOWN?t.changedTouches[0].screenY:t.changedTouches[0].screenX})),document.addEventListener("touchend",(function(t){(J=Y===n.VERTICAL||Y===e.UP||Y===e.DOWN?t.changedTouches[0].screenY:t.changedTouches[0].screenX)<Z?z():J>Z&&G()}))})();